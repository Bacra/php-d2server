<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>插件设置</title>
<script type="text/javascript" src="../js/jquery-1.7.1.min.js" /></script>
<script>

var data = "0,<span id='id_6c000G102606' class='base_txtdiv' onmouseover=javascript:onStopHover('6c000G102606#IZQ#WHN') onmouseout='onStopOut()'>G1026</span>,<img src='/otsweb/images/tips/first.gif'>&nbsp;&nbsp;&nbsp;&nbsp;广州南&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;06:33,<img src='/otsweb/images/tips/last.gif'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;武汉&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;10:28,03:55,10,--,<font color='#008800'>有</font>,<font color='#008800'>有</font>,--,--,--,--,--,--,--,<input type='button' class='yuding_u' onmousemove=this.className='yuding_u_over' onmousedown=this.className='yuding_u_down' onmouseout=this.className='yuding_u' onclick=javascript:getSelected('G1026#03:55#06:33#6c000G102606#IZQ#WHN#10:28#广州南#武汉#9146000010M074000114O046500365') value='预订'></input>";

data = "0,<span id='id_6c000G102606' class='base_txtdiv' onmouseover=javascript:onStopHover('6c000G102606#IZQ#WHN') onmouseout='onStopOut()'>G1026</span>,<img src='/otsweb/images/tips/first.gif'>&nbsp;&nbsp;&nbsp;&nbsp;广州南&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;06:33,<img src='/otsweb/images/tips/last.gif'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;武汉&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;10:28,03:55,10,--,<font color='#008800'>有</font>,<font color='#008800'>有</font>,--,--,--,--,--,--,--,<input type='button' class='yuding_u' onmousemove=this.className='yuding_u_over' onmousedown=this.className='yuding_u_down' onmouseout=this.className='yuding_u' onclick=javascript:getSelected('G1026#03:55#06:33#6c000G102606#IZQ#WHN#10:28#广州南#武汉#9146000010M074000114O046500365') value='预订'></input>\n1,<span id='id_6c000G102806' class='base_txtdiv' onmouseover=javascript:onStopHover('6c000G102806#IZQ#WHN') onmouseout='onStopOut()'>G1028</span>,<img src='/otsweb/images/tips/first.gif'>&nbsp;&nbsp;&nbsp;&nbsp;广州南&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;06:45,<img src='/otsweb/images/tips/last.gif'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;武汉&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;10:40,03:55,--,<font color='darkgray'>无</font>,<font color='darkgray'>无</font>,<font color='darkgray'>无</font>,--,--,--,--,--,--,--,<input type='button' class='yuding_x'  value='预订'></input>\n2,<span id='id_6c000G103009' class='base_txtdiv' onmouseover=javascript:onStopHover('6c000G103009#IZQ#WHN') onmouseout='onStopOut()'>G1030</span>,<img src='/otsweb/images/tips/first.gif'>&nbsp;&nbsp;&nbsp;&nbsp;广州南&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;06:55,<img src='/otsweb/images/tips/last.gif'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;武汉&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;10:58,04:03,--,<font color='darkgray'>无</font>,<font color='darkgray'>无</font>,<font color='darkgray'>无</font>,--,--,--,--,--,--,--,<input type='button' class='yuding_x'  value='预订'></input>\n3,<span id='id_6c000G103209' class='base_txtdiv' onmouseover=javascript:onStopHover('6c000G103209#GBQ#WHN') onmouseout='onStopOut()'>G1032</span>,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;广州北&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;07:24,<img src='/otsweb/images/tips/last.gif'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;武汉&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;11:08,03:44,--,<font color='darkgray'>无</font>,<font color='darkgray'>无</font>,<font color='darkgray'>无</font>,--,--,--,--,--,--,--,<input type='button' class='yuding_x'  value='预订'></input>\n4,<span id='id_6c000G10340A' class='base_txtdiv' onmouseover=javascript:onStopHover('6c000G10340A#GBQ#WHN') onmouseout='onStopOut()'>G1034</span>,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;广州北&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;07:42,<img src='/otsweb/images/tips/last.gif'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;武汉&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;11:27,03:45,<font color='darkgray'>无</font>,--,<font color='darkgray'>无</font>,<font color='darkgray'>无</font>,--,--,--,--,--,--,--,<input type='button' class='yuding_x'  value='预订'></input>\n5,<span id='id_6c000G103608' class='base_txtdiv' onmouseover=javascript:onStopHover('6c000G103608#IZQ#WHN') onmouseout='onStopOut()'>G1036</span>,<img src='/otsweb/images/tips/first.gif'>&nbsp;&nbsp;&nbsp;&nbsp;广州南&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;07:52,<img src='/otsweb/images/tips/last.gif'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;武汉&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;11:50,03:58,10,--,<font color='#008800'>有</font>,<font color='#008800'>有</font>,--,--,--,--,--,--,--,<input type='button' class='yuding_u' onmousemove=this.className='yuding_u_over' onmousedown=this.className='yuding_u_down' onmouseout=this.className='yuding_u' onclick=javascript:getSelected('G1036#03:58#07:52#6c000G103608#IZQ#WHN#11:50#广州南#武汉#9146000010M074000114O046500374') value='预订'></input>\n6,<span id='id_6c000G103808' class='base_txtdiv' onmouseover=javascript:onStopHover('6c000G103808#IZQ#WHN') onmouseout='onStopOut()'>G1038</span>,<img src='/otsweb/images/tips/first.gif'>&nbsp;&nbsp;&nbsp;&nbsp;广州南&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;08:03,<img src='/otsweb/images/tips/last.gif'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;武汉&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;12:04,04:01,--,16,<font color='#008800'>有</font>,<font color='#008800'>有</font>,--,--,--,--,--,--,--,<input type='button' class='yuding_u' onmousemove=this.className='yuding_u_over' onmousedown=this.className='yuding_u_down' onmouseout=this.className='yuding_u' onclick=javascript:getSelected('G1038#04:01#08:03#6c000G103808#IZQ#WHN#12:04#广州南#武汉#M074000045O046500207P088000016') value='预订'></input>\n7,<span id='id_6c000D210202' class='base_txtdiv' onmouseover=javascript:onStopHover('6c000D210202#GBQ#WHN') onmouseout='onStopOut()'>D2102</span>,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;广州北&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;08:07,<img src='/otsweb/images/tips/last.gif'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;武汉&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;13:48,05:41,--,<font color='darkgray'>无</font>,<font color='darkgray'>无</font>,<font color='darkgray'>无</font>,--,--,--,--,--,<font color='darkgray'>无</font>,--,<input type='button' class='yuding_x'  value='预订'></input>\n8,<span id='id_6c000G104009' class='base_txtdiv' onmouseover=javascript:onStopHover('6c000G104009#IZQ#WHN') onmouseout='onStopOut()'>G1040</span>,<img src='/otsweb/images/tips/first.gif'>&nbsp;&nbsp;&nbsp;&nbsp;广州南&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;08:25,<img src='/otsweb/images/tips/last.gif'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;武汉&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;12:22,03:57,10,--,<font color='#008800'>有</font>,<font color='#008800'>有</font>,--,--,--,--,--,--,--,<input type='button' class='yuding_u' onmousemove=this.className='yuding_u_over' onmousedown=this.className='yuding_u_down' onmouseout=this.className='yuding_u' onclick=javascript:getSelected('G1040#03:57#08:25#6c000G104009#IZQ#WHN#12:22#广州南#武汉#9146000010M074000115O046500252') value='预订'></input>";


(function(){
	var arr = data.split('\n');
	for(var i = 0; i < arr.length; i++) {
		var items = arr[i].split(',');
		var last = items[items.length - 1];
		if (last.length > 220) {		//小于此值 可判断为无票
			var info = last.slice(193, -22).split('#');			//获取getSelected的参数，同时作为数组返回
			console.log(info);
		}
	}
})();




//生成表格
$(function(){
	var ii;
	
	
	
	
	var arr = data.split('\n');
	for(var i = 0; i < arr.length; i++) {
		var items = arr[i].split(',');
		
		var iteminfo
		
		var $tr = $('<tr />');
		$tr.append($('<td>' +  $(items[1]).text() + '</td>'));	//车次
		iteminfo = items[2].replace(/&nbsp;/g, '');
		if (iteminfo.indexOf('img') != -1) {
			iteminfo = '* '+iteminfo.slice(41);
		}
		$tr.append($('<td>' +  iteminfo + '</td>'));	//车次
		iteminfo = items[3].replace(/&nbsp;/g, '');
		if (iteminfo.indexOf('img') != -1) {
			iteminfo = '* '+iteminfo.slice(40);
		}
		$tr.append($('<td>' +  iteminfo + '</td>'));	//车次
		$tr.append($('<td>' +  items[4] + '</td>'));	//车次

		//车票信息
		for (ii = 5; ii < 16; ii++) {
			if (items[ii] == "--") {
				$tr.append('<td>--</td>');
			} else {
				$tr.append($('<td><input type="checkbox" /></td>'));
			}
		}
		$tr.append($('<td><input type="button" value="隐藏" /> <input type="button" value="置顶" /></td>'));
		$tr.appendTo('table');
	}
	
	
	
});
</script>
</head>

<body>
<style>
table {
	border-collapse:collapse;
}
table td, table th {
	border:#003366 1px solid;
	padding:3px 6px;
	text-align:center;
}
table th {
	background:#CCCCCC;
}
</style>
<table>
	<tr>
		<th rowspan="2">车次</th>
		<th colspan="3">查询区间</th>
		<th colspan="11">余票信息</th>
		<th rowspan="2">操作</th>
	</tr>
	<tr>
		<th>发站</th>
		<th>到站</th>
		<th>历时</th>
		<th>商务座</th>
		<th>特等座</th>
		<th>一等座</th>
		<th>二等座</th>
		<th>高级软卧</th>
		<th>软卧</th>
		<th>硬卧</th>
		<th>软座</th>
		<th>硬座</th>
		<th>无座</th>
		<th>其他</th>
	</tr>
</table>

</body>
</html>